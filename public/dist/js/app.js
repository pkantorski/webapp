angular.module("underscore",[]).factory("_",["$window",function(o){return o._}]),angular.module("jquery",[]).factory("$",["$window",function(o){return o.$}]);var hackathonApp=angular.module("hackathonApp",["ngRoute","ngAnimate","underscore","jquery","ui.bootstrap","ngMap"]);hackathonApp.config(["$routeProvider",function(o){var e=o.when;o.when=function(r,t){return t.resolve=t.resolve||(t.resolve={}),e.call(o,r,t)},o.when("/",{templateUrl:"main",controller:"MainController"}).otherwise({redirectTo:"/"})}]),hackathonApp.controller("GlobalController",["$scope","$rootScope",function(o,e){e.hideFilters=!1,o.showFilters=function(){e.hideFilters=!1,e.rightBar=!1}}]),hackathonApp.controller("HeaderController",["$scope","$rootScope","$http",function(o,e,r){o.cities=[],o.parameters=[],e.marker=[],e.markerDetail=[],o.search={},o.showInfo=!1,e.parametersList=[{param1:"oferty pracy"},{param2:"interpolacje"},{param3:"zarządzenia prezydenta"},{param4:"zarządzenia rady miasta"},{param5:"przetargi"}],r.get("/cities").then(function(e){o.cities=e.data,o.parameters=e.data.parameters}),o.showResult=function(){if(o.search.city=JSON.parse(o.search.city),e.actualCoords=[o.search.city.lat,o.search.city["long"]],o.search.city){o.showInfo=!1;var t=[];angular.forEach(o.search,function(o,r){if("city"!==r){var a=r.split("param"),n=e.parametersList[a[1]-1];t.push(n)}});var a={city:o.search.city.cityName,parameter:t};r.get("/markers",a).then(function(o){e.marker=o.data,e.markerDetail=o.data},function(o){console.log(o)}),e.markerDetail&&(e.hideFilters=!0,e.rightBar=!0,e.mapZoom=11)}else o.showInfo=!0}}]),hackathonApp.controller("MainController",["$scope","$rootScope","$","NgMap","$http","$uibModal",function(o,e,r,t,a,n){"geolocation"in navigator?(e.geolocation=!0,navigator.geolocation.getCurrentPosition(function(o){e.actualCoords=[o.coords.latitude,o.coords.longitude]},function(o){console.log(o),e.actualCoords=[52.4064,16.9252]})):e.geolocation=!1,e.mapZoom=11,e.rightBar=!1,o.showBackButton=!1,t.getMap().then(function(o){o.getCenter()}),o.showDescription=function(r,t){e.markerDetail=[e.marker[t]],e.markerDetail&&(e.actualCoords=[e.markerDetail[0].lat,e.markerDetail[0].lng],e.mapZoom=14,e.rightBar=!0,o.showBackButton=!0)},o.showDescriptionFromList=function(r,t){e.markerDetail.length>1&&(e.markerDetail=[e.marker[t]],e.markerDetail&&(e.actualCoords=[e.markerDetail[0].lat,e.markerDetail[0].lng],e.mapZoom=14,e.rightBar=!0,o.showBackButton=!0))},o.showAllMarker=function(){o.showBackButton=!1,e.mapZoom=11,e.markerDetail=e.marker,e.geolocation&&navigator.geolocation.getCurrentPosition(function(o){e.actualCoords=[o.coords.latitude,o.coords.longitude]},function(o){console.log(o),e.actualCoords=[52.4064,16.9252]})},o.showModal=function(o){e.modalRedirect=n.open({templateUrl:"modal",controller:"ModalController",size:"lg modal",resolve:{response:function(){return o}}})},r(window).on("load",function(){r(".right-bar").mCustomScrollbar()})}]),hackathonApp.controller("ModalController",["$scope","$rootScope","$uibModal","$uibModalInstance","response","$http",function(o,e,r,t,a,n){o.response=a,o.response&&(console.log(o.response),n.jsonp(o.response).then(function(o){console.log("asd")},function(o){console.log(o)})),o.ok=function(){t.close()},o.cancel=function(){t.dismiss("cancel")},o.close=function(){t.close()},e.modalRedirect.result.then(function(){},function(){})}]),hackathonApp.filter("unsafe",["$sce",function(o){return o.trustAsHtml}]);