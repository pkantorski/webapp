angular.module("underscore",[]).factory("_",["$window",function(o){return o._}]),angular.module("jquery",[]).factory("$",["$window",function(o){return o.$}]);var hackathonApp=angular.module("hackathonApp",["ngRoute","ngAnimate","underscore","jquery","ui.bootstrap","ngMap"]);hackathonApp.config(["$routeProvider",function(o){var r=o.when;o.when=function(t,e){return e.resolve=e.resolve||(e.resolve={}),r.call(o,t,e)},o.when("/",{templateUrl:"main",controller:"MainController"}).otherwise({redirectTo:"/"})}]),hackathonApp.controller("GlobalController",["$scope","$rootScope",function(o,r){r.hideFilters=!1,o.showFilters=function(){r.hideFilters=!1,r.rightBar=!1}}]),hackathonApp.controller("HeaderController",["$scope","$rootScope","$http",function(o,r,t){o.cities=[],o.parameters=[],r.marker=[],r.markerDetail=[],o.search={},o.showInfo=!1,r.parametersList=[{param1:"oferty pracy"},{param2:"interpolacje"},{param3:"zarządzenia prezydenta"},{param4:"zarządzenia rady miasta"},{param5:"przetargi"}],t.get("/cities").then(function(r){o.cities=r.data.cities,o.parameters=r.data.parameters}),o.showResult=function(){if(o.search.city){o.showInfo=!1;var e=[];angular.forEach(o.search,function(o,t){if("city"!==t){var a=t.split("param"),n=r.parametersList[a[1]-1];e.push(n)}});var a={city:o.search.city,parameter:e};t.get("/markers",a).then(function(o){r.marker=o.data,console.log(r.marker),r.markerDetail=o.data},function(o){console.log(o)}),r.markerDetail&&(r.hideFilters=!0,r.rightBar=!0,r.mapZoom=11)}else o.showInfo=!0}}]),hackathonApp.controller("MainController",["$scope","$rootScope","$","NgMap","$http","$uibModal",function(o,r,t,e,a,n){"geolocation"in navigator?(r.geolocation=!0,navigator.geolocation.getCurrentPosition(function(r){o.actualCoords=[r.coords.latitude,r.coords.longitude]},function(r){console.log(r),o.actualCoords=[52.4064,16.9252]})):r.geolocation=!1,r.mapZoom=11,r.rightBar=!1,o.showBackButton=!1,e.getMap().then(function(o){o.getCenter()}),o.showDescription=function(t,e){r.markerDetail=[r.marker[e]],r.markerDetail&&(o.actualCoords=[r.markerDetail[0].positions[0],r.markerDetail[0].positions[1]],r.mapZoom=14,r.rightBar=!0,o.showBackButton=!0)},o.showDescriptionFromList=function(t,e){r.markerDetail.length>1&&(r.markerDetail=[r.marker[e]],r.markerDetail&&(o.actualCoords=[r.markerDetail[0].positions[0],r.markerDetail[0].positions[1]],r.mapZoom=14,r.rightBar=!0,o.showBackButton=!0))},o.showAllMarker=function(){o.showBackButton=!1,r.mapZoom=11,r.markerDetail=r.marker,r.geolocation&&navigator.geolocation.getCurrentPosition(function(r){o.actualCoords=[r.coords.latitude,r.coords.longitude]},function(r){console.log(r),o.actualCoords=[52.4064,16.9252]})},o.showModal=function(){r.modalRedirect=n.open({templateUrl:"modal",controller:"ModalController",size:"lg modal",resolve:{response:function(){return!1}}})},t(window).on("load",function(){t(".right-bar").mCustomScrollbar()})}]),hackathonApp.controller("ModalController",["$scope","$rootScope","$uibModal","$uibModalInstance","response",function(o,r,t,e,a){o.response=a,o.ok=function(){e.close()},o.cancel=function(){e.dismiss("cancel")},o.close=function(){e.close()},r.modalRedirect.result.then(function(){},function(){})}]),hackathonApp.filter("unsafe",["$sce",function(o){return o.trustAsHtml}]);